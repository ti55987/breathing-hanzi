{"ast":null,"code":"var _jsxFileName = \"/Users/tpan/Development/volunteer/breathing-hanzi/src/components/tester_container.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useLocation, useParams, useHistory } from \"react-router-dom\";\nimport WordNavbar from \"./navigation/word_navbar\";\nimport TestPresenter from \"./test_presenter\";\nimport AudioPlayer from \"./common/audio_player\";\nimport { WordData } from \"./constants/word_data\";\nimport VideoPlayer from \"./common/video_player\";\nimport HanziWriter from \"hanzi-writer\";\nimport * as CgIcon from \"react-icons/cg\";\nimport * as MdIcons from \"react-icons/md\";\nimport \"./tester_container.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst queryString = require(\"query-string\");\n\nfunction getLevel(location) {\n  switch (queryString.parse(location.search).level) {\n    case \"1\":\n      return 1;\n\n    case \"2\":\n      return 2;\n\n    default:\n      return 3;\n  }\n}\n\nfunction Tester() {\n  _s();\n\n  const location = useLocation();\n  let history = useHistory();\n  const {\n    word\n  } = useParams();\n  const [showModal, setShowModal] = useState(false);\n  const level = getLevel(location);\n  useEffect(() => {\n    const nID = `nose-${level}`;\n    let idName = level < 3 ? nID : \"grid-background-target\";\n    const gridWriter = HanziWriter.create(idName, word, {\n      width: 400,\n      height: 400,\n      padding: 20\n    });\n    gridWriter.hideCharacter();\n    gridWriter.hideOutline();\n    gridWriter.quiz();\n  }, [level, word]);\n  useEffect(() => {\n    const imageFilePath = level === 1 ? WordData[word].ancientUrl : WordData[word].imageUrl;\n\n    if (level < 3) {\n      const el = document.getElementById(`nose-${level}`);\n\n      if (el) {\n        el.style.backgroundImage = `url('${imageFilePath}')`;\n      }\n    }\n  }, [level, word]);\n  const data = WordData[word];\n  const footer = level === 1 ? /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"level-button \",\n    onClick: () => history.push(`/hanzi/${word}/test?level=2`),\n    children: /*#__PURE__*/_jsxDEV(CgIcon.CgArrowRightR, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 7\n  }, this) : buildHints(data.hints, showModal, setShowModal);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"test-container\",\n    children: [/*#__PURE__*/_jsxDEV(WordNavbar, {\n      word: word\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"test-area\",\n      children: [/*#__PURE__*/_jsxDEV(AudioPlayer, {\n        url: data.testAudio,\n        btnText: \"\\u8ACB\\u5BEB\\u51FA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TestPresenter, {\n        level: level,\n        pictureUrl: WordData[word].imageUrl,\n        videoUrl: WordData[word].videoUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), footer]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Tester, \"Rhfzm/DKyitfkXNGRATABL7q1Lw=\", false, function () {\n  return [useLocation, useHistory, useParams];\n});\n\n_c = Tester;\n\nfunction buildHints(hints, showModal, setShowModal) {\n  let summary = \"提示\";\n  return /*#__PURE__*/_jsxDEV(\"details\", {\n    className: \"hint-details\",\n    children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n      children: summary\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"hint-ul\",\n      children: [hints.map((item, index) => {\n        const num = index + 1;\n        const text = \"提示 \" + num.toString();\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"hint-li\",\n          children: /*#__PURE__*/_jsxDEV(AudioPlayer, {\n            url: item.audio,\n            btnText: text,\n            style: \"audio-button hint-button\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"hint-li\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"audio-button hint-button\",\n          onClick: () => setShowModal(true),\n          children: [\"\\u8907\\u7FD2 \", /*#__PURE__*/_jsxDEV(MdIcons.MdLiveTv, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 16\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(VideoPlayer, {\n          open: showModal,\n          onClose: () => setShowModal(false),\n          url: \"https://www.youtube.com/watch?v=ysz5S6PUM-U\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n\nexport default Tester;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tester\");","map":{"version":3,"sources":["/Users/tpan/Development/volunteer/breathing-hanzi/src/components/tester_container.tsx"],"names":["React","useState","useEffect","useLocation","useParams","useHistory","WordNavbar","TestPresenter","AudioPlayer","WordData","VideoPlayer","HanziWriter","CgIcon","MdIcons","queryString","require","getLevel","location","parse","search","level","Tester","history","word","showModal","setShowModal","nID","idName","gridWriter","create","width","height","padding","hideCharacter","hideOutline","quiz","imageFilePath","ancientUrl","imageUrl","el","document","getElementById","style","backgroundImage","data","footer","push","buildHints","hints","testAudio","videoUrl","summary","map","item","index","num","text","toString","audio"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useLocation, useParams, useHistory } from \"react-router-dom\";\n\nimport WordNavbar from \"./navigation/word_navbar\";\nimport TestPresenter from \"./test_presenter\";\nimport AudioPlayer from \"./common/audio_player\";\nimport { Hint, WordData } from \"./constants/word_data\";\nimport VideoPlayer from \"./common/video_player\";\n\nimport HanziWriter from \"hanzi-writer\";\nimport * as CgIcon from \"react-icons/cg\";\nimport * as MdIcons from \"react-icons/md\";\n\nimport \"./tester_container.css\";\nconst queryString = require(\"query-string\");\n\nfunction getLevel(location: any) {\n  switch (queryString.parse(location.search).level) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    default:\n      return 3;\n  }\n}\n\nfunction Tester() {\n  const location = useLocation();\n  let history = useHistory();\n  const { word } = useParams<{ word: string }>();\n  const [showModal, setShowModal] = useState(false);\n\n  const level = getLevel(location);\n\n  useEffect(() => {\n    const nID = `nose-${level}`;\n    let idName = level < 3 ? nID : \"grid-background-target\";\n    const gridWriter = HanziWriter.create(idName, word, {\n      width: 400,\n      height: 400,\n      padding: 20\n    });\n\n    gridWriter.hideCharacter();\n    gridWriter.hideOutline();\n    gridWriter.quiz();\n  }, [level, word]);\n\n  useEffect(() => {\n    const imageFilePath =\n      level === 1 ? WordData[word].ancientUrl : WordData[word].imageUrl;\n    if (level < 3) {\n      const el = document.getElementById(`nose-${level}`);\n      if (el) {\n        el.style.backgroundImage = `url('${imageFilePath}')`;\n      }\n    }\n  }, [level, word]);\n\n  const data = WordData[word];\n  const footer =\n    level === 1 ? (\n      <button\n        className=\"level-button \"\n        onClick={() => history.push(`/hanzi/${word}/test?level=2`)}\n      >\n        <CgIcon.CgArrowRightR />\n      </button>\n    ) : (\n      buildHints(data.hints, showModal, setShowModal)\n    );\n  return (\n    <div className=\"test-container\">\n      <WordNavbar word={word} />\n      <div className=\"test-area\">\n        <AudioPlayer url={data.testAudio} btnText=\"請寫出\" />\n        <TestPresenter\n          level={level}\n          pictureUrl={WordData[word].imageUrl}\n          videoUrl={WordData[word].videoUrl}\n        />\n        <hr />\n        {footer}\n      </div>\n    </div>\n  );\n}\n\nfunction buildHints(hints: Array<Hint>, showModal: any, setShowModal: any) {\n  let summary = \"提示\";\n  return (\n    <details className=\"hint-details\">\n      <summary>{summary}</summary>\n      <ul className=\"hint-ul\">\n        {hints.map((item, index) => {\n          const num = index + 1;\n          const text = \"提示 \" + num.toString();\n          return (\n            <li key={index} className=\"hint-li\">\n              <AudioPlayer\n                url={item.audio}\n                btnText={text}\n                style=\"audio-button hint-button\"\n              />\n            </li>\n          );\n        })}\n        <li className=\"hint-li\">\n          <button\n            className=\"audio-button hint-button\"\n            onClick={() => setShowModal(true)}\n          >\n            複習 <MdIcons.MdLiveTv />\n          </button>\n          <VideoPlayer\n            open={showModal}\n            onClose={() => setShowModal(false)}\n            url=\"https://www.youtube.com/watch?v=ysz5S6PUM-U\"\n          />\n        </li>\n      </ul>\n    </details>\n  );\n}\n\nexport default Tester;\n"]},"metadata":{},"sourceType":"module"}